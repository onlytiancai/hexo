---
title: '202210'
date: 2022-10-07 16:33:43
tags:
---

## 硬件

按下键盘后为什么屏幕上就会有输出
https://www.51cto.com/article/698488.html

内存中有这样一部分区域，是和显存映射的。啥意思，就是你往上图的这些内存区域中写数据，相当于写在了显存中。而往显存中写数据，就相当于在屏幕上输出文本了。

mov [0xB8000],'h' 
mov [0xB8002],'e' 
mov [0xB8004],'l' 
mov [0xB8006],'l' 
mov [0xB8008],'o' 

I2C接口与SPI和UART接口的区别
https://blog.csdn.net/chenhuanqiangnihao/article/details/123359352

总线接口 UART I2C SPI USB的异同点
- UART(RS232) 通用异步串行口，速率不快，可全双工，结构上一般由波特率产生器、UART 发送器、UART 接收器组成，硬件上两线，一收一发。
- SPI 高速同步串行口，高速，可全双工，收发独立，同步接口，可实现多个 SPI 设备互联，硬件 4 条线。
- I2C 双向、两线、串行、多主控接口标准。速率不快，半双工，同步接口，具有总线仲裁机制，非常适合器件间近距离经常性数据通信，可实现设备组网。
- USB 通用串行总线，高速，半双工，由主机、hub、设备组成。设备可以与下级 hub 相连构成星型结构。


OLED显示屏是利用有机电自发光二极管制成的显示屏，其中每一个像素点就是一个led。

ESP8266、ESP32和STM32的区别
https://baijiahao.baidu.com/s?id=1730615149655141528

- ESP8266，价格 10 元左右。
- ESP32，是 ESP8266 的升级版本，速度更快还带有蓝牙 4.2 和蓝牙低功耗，价格在20元左右
    - 优点：
        - ESP32 可用引脚比 ESP8266 更多
        - 双核处理器能够多线程实时处理；
        - 高速主频 240MHZ，对比 STM32F1 的 72MHZ 和 STM32F4 的168MHZ，速度快很多，价格 STM 系低出非常多；
        - 自带蓝牙和 Wifi，不用再花费成本去购置额外模块，成本更加低；
        - 编程上可以使用 arduino 环境，编程难度比 STM32 低很多，开源项目很多，开发速度很快。
    缺点：
        - 引脚数量过少是现阶段 ESP32 的硬伤之一
- STM32 是一种基于ARM架构的32位微控制器。
    - 优点：
        - 通讯接口十分丰富，如 USART，I2C，SPI，CAN，以太网通讯等；
        - 可用 GPIO 数量非常多，可以控制大量设备；
        - 定时器数量很多，中断系统也十分完善，能实现非常复杂的逻辑；
        - 多路 ADC 和 DAC 功能，可用于读取大量传感器等；
        - 可运行 Free RTOS，RT thread，UCOS 等实时操作系统，可用于控制复杂系统；
        - 可连接 SD 卡，LCD 屏，有摄像头接口，可读取 USB 功能等。
    - 缺点：
        - STM32 的价格一直在上涨。如果不需要以太网、摄像头和 DACD 等功能时可以考虑 F1 系列。
        - 上手有一定难度，需要一定的时间。

## 前端

最简洁Vue+Electron项目搭建教程
https://zhuanlan.zhihu.com/p/335225253

vue3.x+ts项目创建，配置流程
https://blog.csdn.net/csl125/article/details/126000350


electron install

    npm config set ELECTRON_MIRROR=https://npm.taobao.org/mirrors/electron/
    export ELECTRON_MIRROR=https://npm.taobao.org/mirrors/electron/
    npx electron-forge import
    npm install --save-dev electron --registry=https://registry.npm.taobao.org
    npm install --save-dev @electron-forge/cli --registry=https://registry.npm.taobao.org
    npx electron-forge import
    npm run make


electron-vite | 新一代electron开发构建工具
https://juejin.cn/post/7084126780390375461


    ├──src
    |  ├──main
    |  |  ├──index.js
    |  |  └──...
    |  ├──preload
    |  |  ├──index.js
    |  |  └──...
    |  └──renderer
    |     ├──src
    |     ├──index.html
    |     └──...
    ├──electron.vite.config.js
    └──package.json

搭配 TypeScript 使用 Vue
https://cn.vuejs.org/guide/typescript/overview.html

深入理解 TypeScript
https://jkchao.github.io/typescript-book-chinese/#why


https://github.com/sindresorhus/electron-store
https://github.com/louischatriot/nedb

## 网络
iperf3-vsock: how to measure VSOCK performance
https://stefano-garzarella.github.io/posts/2019-08-22-vsock-iperf3/

Iperf3网络性能测试工具详解教程
https://www.cnblogs.com/xuanbjut/p/14144255.html

- Iperf是美国伊利诺斯大学（University of Illinois）开发的一种开源的网络性能测试工具。可以用来测试网络节点间（也包括回环）TCP或UDP连接的性能，包括带宽、抖动以及丢包率，其中抖动和丢包率适应于UDP测试，而带宽测试适应于TCP和UDP。
- Iperf是一款基于TCP/IP和UDP/IP的网络性能测试工具，可以用来测量网络带宽和网络质量，提供网络延迟抖动、数据包丢失率、最大传输单元等统计信息。网络管理员可以根据这些信息了解并判断网络性能问题，从而定位网络瓶颈，解决网络故障。

    # server
    iperf3 -s -i 1 -p 5200
    # client
    iperf -c 127.0.0.1 -i 1 -t 60 -p 5200


带宽测试通常采用UDP模式，因为能测出极限带宽、时延抖动、丢包率。在进行测试时，首先以链路理论带宽作为数据发送速率进行测试，例如，从客户端到服务器之间的链路的理论带宽为100Mbps，先用-b 100M进行测试，然后根据测试结果（包括实际带宽，时延抖动和丢包率），再以实际带宽作为数据发送速率进行测试，会发现时延抖动和丢包率比第一次好很多，重复测试几次，就能得出稳定的实际带宽。

    # server
    iperf3 -s -i 1 -p 5210
    # client
    iperf3 -u -c 127.0.0.1 -b 100m -t 10 -p 5210 -b 40G

TCP 和 UDP 可以使用同一个端口吗？
https://www.51cto.com/article/714728.html

## linux

ssh 隧道

    ssh -CfNg -L 48175:127.0.0.1:48175 ubuntu@8.8.8.8

按进程关键字杀进程

    ps -C "ssh -CfNg -L 48175:127.0.0.1:48175" -o pid= | xargs kill

https://blog.csdn.net/zqixiao_09/article/details/79265789
linux上的自旋锁有三种实现：

1. 在单cpu，不可抢占内核中，自旋锁为空操作。
2. 在单cpu，可抢占内核中，自旋锁实现为“禁止内核抢占”，并不实现“自旋”。
3. 在多cpu，可抢占内核中，自旋锁实现为“禁止内核抢占” + “自旋”。

非抢占式内核: 如果一个进程在内核态运行，其只有在以下两种情况会被切换：
- 其运行完成（返回用户空间）
- 主动让出 cpu（即主动调用 schedule 或内核中的任务阻塞——这同样也会导致调用 schedule）

抢占式内核: 如果一个进程在内核态运行，其只有在以下四种情况会被切换：
- 其运行完成（返回用户空间）
- 主动让出 cpu（即主动调用 schedule 或内核中的任务阻塞——这同样也会导致调用 schedule）
- 当从中断处理程序正在执行，且返回内核空间之前（此时可抢占标志premptcount须为0） 。
- 当内核代码再一次具有可抢占性的时候，如解锁及使能软中断等。

其它
- 禁止内核抢占只是关闭“可抢占标志”，而不是禁止进程切换。 
    - 显式使用 schedule 或进程阻塞（此也会导致调用schedule）时，还是会发生进程调度的。
- 对于多核抢占与多核非抢占的情况，在使用自旋锁时，其情况基本是一致的。
    - 因为在多核抢占的情况下，使用自旋锁会禁止内核抢占，这样多核抢占就相当于多核非抢占的情况。


被自旋锁保护的临界区代码执行时，它不能因为任何原因放弃处理器：
- 被自旋锁保护的临界区代码执行时，不能进入休眠。
- 被自旋锁保护的临界区代码执行时，不能被被其他中断中断。
- 被自旋锁保护的临界区代码执行时，内核不能被抢占。

所以现代处理器在处理自旋锁时都会设定自旋上限时间以防死锁. 另自旋锁在单核非抢占式CPU上是无效的.被设为空操作,不做任何事.


虚拟机 ESXi、PVE、unRaid对比
https://zhuanlan.zhihu.com/p/166352130

- ESXi，是 VMWare vSphere Hypervisor 套件之下重要组件。前身是 ESX，依赖 Linux 源码，后来抛弃 Linux 源码做成了 ESXi。
    - 整个产品商用气息浓重，界面清晰易用，但硬件兼容性较差（主要面向服务器），没什么扩展性（毕竟不是 linux）。
- PVE，全称 Proxmox Virtual Environment，是基于 Debian 的 Linux 系统，虚拟机内核为 KVM。
    - 硬件兼容性优秀。界面功能不强，很多操作要靠命令行，但扩展能力几乎是无限的。
- unRaid，其实是个NAS系统，是基于Slackware的Linux系统，虚拟机内核也是KVM。
    - 磁盘阵列管理非常有特色，灵活性很高。同时还有很不错的插件、Docker和虚拟机支持。

## mysql

两个数据库之间导数据
How can I transfer data between 2 MySQL databases?
https://stackoverflow.com/questions/3242504/how-can-i-transfer-data-between-2-mysql-databases

We have also used FIFO's to great effect to avoid the overhead of actually writing to disk, 
or if we do need to write to disk for some reason, to pipe it through gzip.

    mkfifo /tmp/myfifo
    gzip -c /tmp/myfifo > /tmp/mytable.csv.gz &
    SELECT * FROM mytable INTO OUTFILE '/tmp/myfifo'
      FIELDS TERMINATED BY ',' 
      OPTIONALLY ENCLOSED BY '"' 
      ESCAPED BY '\\\\' 
      LINES TERMINATED BY '\\n' ;

    gunzip -c /tmp/mytable.csv.gz > /tmp/myfifo &
    LOAD DATA INFILE '/tmp/myfifo' INTO TABLE mytable 
      FIELDS TERMINATED BY ',' 
      OPTIONALLY ENCLOSED BY '"' 
      ESCAPED BY '\\\\' 
      LINES TERMINATED BY '\\n' ;

How to take mysql dump of selected columns of a table
https://stackoverflow.com/questions/15264597/how-to-take-mysql-dump-of-selected-columns-of-a-table

    mysql> CREATE TABLE `tempTable` AS SELECT `columnYouWant` from `table`;
    $> mysqldump yourDB tempTable > temp.sql

    $> mysql yourDB < temp.sql
    mysql> RENAME TABLE `table` TO `tableBackup`, `tempTable` TO `table`;

查看每个表的大小

    SELECT
      TABLE_NAME AS `Table`,
      ROUND((DATA_LENGTH + INDEX_LENGTH) / 1024 / 1024) AS `Size (MB)`
    FROM
      information_schema.TABLES
    WHERE
      TABLE_SCHEMA = "dirtable"
    ORDER BY
      (DATA_LENGTH + INDEX_LENGTH)
    DESC
    limit 15;

## 流媒体

SRS是一个简单高效的实时视频服务器，支持RTMP/WebRTC/HLS/HTTP-FLV/SRT/GB28181。
https://ossrs.net/lts/zh-cn/docs/v4/doc/introduction

开源复刻：OBS如何支持直播多人连麦，可连麦的在线发布会
https://github.com/ossrs/srs/issues/2749

